comments = {
    "Desactivación": [
        {
            "Desactivación": "tamper"
        },
        {
            "Desactivación": "tamper Clock"
        },
        {
            "Desactivación": "tamper COR1"
        },
        {
            "Desactivación": "tamper COR2"
        },
        {
            "Desactivación": "tamper Inicio-SD"
        },
        {
            "Desactivación": "tamper KB"
        },
        {
            "Desactivación": "tamper Monotonic"
        },
        {
            "Desactivación": "tamper PCB"
        },
        {
            "Desactivación": "tamper Pin 2-0"
        },
        {
            "Desactivación": "tamper Pin 3-1"
        },
        {
            "Desactivación": "tamper Pin 6-4"
        },
        {
            "Desactivación": "tamper Pin 7-5"
        },
        {
            "Desactivación": "tamper PIN0"
        },
        {
            "Desactivación": "tamper PIN1"
        },
        {
            "Desactivación": "tamper PIN2"
        },
        {
            "Desactivación": "tamper PIN3"
        },
        {
            "Desactivación": "tamper PIN4"
        },
        {
            "Desactivación": "tamper PIN5"
        },
        {
            "Desactivación": "tamper PIN6"
        },
        {
            "Desactivación": "tamper PIN7"
        },
        {
            "Desactivación": "tamper Security"
        },
        {
            "Desactivación": "tamper Temperatura"
        },
        {
            "Desactivación": "tamper test mode"
        },
        {
            "Desactivación": "tamper Time OV"
        },
        {
            "Desactivación": "tamper Voltage"
        }
    ],
    "Sustitución": [
        {
            "Sustitución": "Alimentador"
        },
        {
            "Sustitución": "Altavoz"
        },
        {
            "Sustitución": "Antena"
        },
        {
            "Sustitución": "Antena Bluetooth"
        },
        {
            "Sustitución": "Antena contactless"
        },
        {
            "Sustitución": "Antena GPS"
        },
        {
            "Sustitución": "Antena GSM"
        },
        {
            "Sustitución": "Antena WIFI"
        },
        {
            "Sustitución": "Batería"
        },
        {
            "Sustitución": "Batería interna"
        },
        {
            "Sustitución": "Buzzer"
        },
        {
            "Sustitución": "Cámara frontal"
        },
        {
            "Sustitución": "Cámara trasera"
        },
        {
            "Sustitución": "Carcasa intermedia"
        },
        {
            "Sustitución": "Carcasa superior"
        },
        {
            "Sustitución": "Carcasa trasera"
        },
        {
            "Sustitución": "Cargador"
        },
        {
            "Sustitución": "Circuito integrado"
        },
        {
            "Sustitución": "Condensador"
        },
        {
            "Sustitución": "Conector"
        },
        {
            "Sustitución": "Conector de bateria"
        },
        {
            "Sustitución": "Conector de carga"
        },
        {
            "Sustitución": "Conector display"
        },
        {
            "Sustitución": "Conector impresora"
        },
        {
            "Sustitución": "Conector microUSB"
        },
        {
            "Sustitución": "Conector USB tipo C"
        },
        {
            "Sustitución": "CPU"
        },
        {
            "Sustitución": "Criptoprocesador"
        },
        {
            "Sustitución": "Display"
        },
        {
            "Sustitución": "Escudo"
        },
        {
            "Sustitución": "Flex Core"
        },
        {
            "Sustitución": "Flex encendido"
        },
        {
            "Sustitución": "Flex NFC"
        },
        {
            "Sustitución": "Flex teclado"
        },
        {
            "Sustitución": "Impresora"
        },
        {
            "Sustitución": "KIT Display + Carcasa superior"
        },
        {
            "Sustitución": "Láser"
        },
        {
            "Sustitución": "Lector banda magnética"
        },
        {
            "Sustitución": "Lector chip card"
        },
        {
            "Sustitución": "lente cámara trasera"
        },
        {
            "Sustitución": "lente escaner"
        },
        {
            "Sustitución": "Metal DOME"
        },
        {
            "Sustitución": "Microfono"
        },
        {
            "Sustitución": "MicroSD"
        },
        {
            "Sustitución": "Modem"
        },
        {
            "Sustitución": "Muro seguridad"
        },
        {
            "Sustitución": "Neoprenos"
        },
        {
            "Sustitución": "Panel táctil"
        },
        {
            "Sustitución": "Patas de goma"
        },
        {
            "Sustitución": "Pila"
        },
        {
            "Sustitución": "Placa base"
        },
        {
            "Sustitución": "Placa subordinada"
        },
        {
            "Sustitución": "Placa teclado"
        },
        {
            "Sustitución": "PMIC"
        },
        {
            "Sustitución": "Pulsador"
        },
        {
            "Sustitución": "Pulsador de goma"
        },
        {
            "Sustitución": "Resistencias"
        },
        {
            "Sustitución": "Rodillo"
        },
        {
            "Sustitución": "SD Card"
        },
        {
            "Sustitución": "Tapa bateria"
        },
        {
            "Sustitución": "Tapa papel"
        },
        {
            "Sustitución": "Teclado"
        },
        {
            "Sustitución": "Vibrador"
        },
        {
            "Sustitución": "Zebra (Tamper)"
        },
        {
            "Sustitución": "Zocalo SIM"
        }
    ],
    "Reajuste": [
        {
            "Reajuste": "Conector"
        },
        {
            "Reajuste": "Lector banda"
        },
        {
            "Reajuste": "Lector chip card"
        },
        {
            "Reajuste": "Lector MicroSD"
        },
        {
            "Reajuste": "Lector SIM"
        }
    ],
    "Resoldadura": [
        {
            "Resoldadura": "Circuito integrado"
        },
        {
            "Resoldadura": "Conector"
        },
        {
            "Resoldadura": "Conector de carga"
        },
        {
            "Resoldadura": "CPU"
        },
        {
            "Resoldadura": "Criptoprocesador"
        },
        {
            "Resoldadura": "muro seguridad"
        },
        {
            "Resoldadura": "PMIC"
        },
        {
            "Resoldadura": "Pulsador"
        }
    ],
    "Scrap": [
        {
            "Scrap": "Alimentador"
        },
        {
            "Scrap": "Altavoz"
        },
        {
            "Scrap": "Antena"
        },
        {
            "Scrap": "Antena Bluetooth"
        },
        {
            "Scrap": "Antena contactless"
        },
        {
            "Scrap": "Antena GPS"
        },
        {
            "Scrap": "Antena GSM"
        },
        {
            "Scrap": "Antena WIFI"
        },
        {
            "Scrap": "Batería"
        },
        {
            "Scrap": "Batería interna"
        },
        {
            "Scrap": "Buzzer"
        },
        {
            "Scrap": "Cámara frontal"
        },
        {
            "Scrap": "Cámara trasera"
        },
        {
            "Scrap": "Carcasa intermedia"
        },
        {
            "Scrap": "Carcasa superior"
        },
        {
            "Scrap": "Carcasa trasera"
        },
        {
            "Scrap": "Cargador"
        },
        {
            "Scrap": "Circuito integrado"
        },
        {
            "Scrap": "Condensador"
        },
        {
            "Scrap": "Conector"
        },
        {
            "Scrap": "Conector de bateria"
        },
        {
            "Scrap": "Conector de carga"
        },
        {
            "Scrap": "Conector display"
        },
        {
            "Scrap": "Conector impreso"
        },
        {
            "Scrap": "Conector microUS"
        },
        {
            "Scrap": "Conector USB tipo C"
        },
        {
            "Scrap": "CPU"
        },
        {
            "Scrap": "Criptoprocesador"
        },
        {
            "Scrap": "Display"
        },
        {
            "Scrap": "Escudo"
        },
        {
            "Scrap": "Flex Core"
        },
        {
            "Scrap": "Flex encendido"
        },
        {
            "Scrap": "Flex NFC"
        },
        {
            "Scrap": "Flex teclado"
        },
        {
            "Scrap": "Impresora"
        },
        {
            "Scrap": "KIT Display + Carcasa superior"
        },
        {
            "Scrap": "Láser"
        },
        {
            "Scrap": "Lector banda magnética"
        },
        {
            "Scrap": "Lector chip card"
        },
        {
            "Scrap": "lente cámara trasera"
        },
        {
            "Scrap": "lente escaner"
        },
        {
            "Scrap": "Metal DOME"
        },
        {
            "Scrap": "Microfono"
        },
        {
            "Scrap": "MicroSD"
        },
        {
            "Scrap": "Modem"
        },
        {
            "Scrap": "Muro seguridad"
        },
        {
            "Scrap": "Neoprenos"
        },
        {
            "Scrap": "Panel táctil"
        },
        {
            "Scrap": "Pila"
        },
        {
            "Scrap": "Placa base"
        },
        {
            "Scrap": "Placa subordinada"
        },
        {
            "Scrap": "Placa teclado"
        },
        {
            "Scrap": "PMIC"
        },
        {
            "Scrap": "Resistencias"
        },
        {
            "Scrap": "Rodillo"
        },
        {
            "Scrap": "SD Card"
        },
        {
            "Scrap": "Tapa bateria"
        },
        {
            "Scrap": "Tapa papel"
        },
        {
            "Scrap": "Teclado"
        },
        {
            "Scrap": "Vibrador"
        },
        {
            "Scrap": "Zebra (Tamper)"
        },
        {
            "Scrap": "Zocalo SIM"
        }
    ],
    "Varios": [
        {
            "Varios": "Actualización versión"
        },
        {
            "Varios": "Carga de claves"
        },
        {
            "Varios": "Devolución de terminal"
        },
        {
            "Varios": "Devuelto irreparable"
        },
        {
            "Varios": "Limpieza"
        },
        {
            "Varios": "Plataformado"
        },
        {
            "Varios": "Revisión tensión batería"
        }
    ]
}
const data = Object.entries(comments);
const commentsContainer = document.getElementById('comments-container');
const wholeCommentContainer = document.getElementById('whole-comment-container');
const wholeCommentText = document.getElementById('whole-comment-text');

let wholeComment = {};
let wholeCommentArray = [];
let booksArray = [];

commentsContainer.addEventListener('click', event => {
	if (event.target.nodeName === 'P') {
		const bookId = event.target.parentNode.getAttribute('id');
		const commentText = event.target.innerText;

		console.log(bookId);
		console.log(commentText);

		if (!wholeComment[bookId]) {
			wholeComment[bookId] = [];

			wholeComment[bookId].push(commentText);
		} else {
			wholeComment[bookId].push(commentText);
		}
		console.log(wholeComment);

		wholeCommentArray = Object.entries(wholeComment);

		let wholeCommentStrings = [];
		for (let i = 0; i < wholeCommentArray.length; i++) {
			if (wholeCommentArray[i][0] == 'Desactivación') {
				const wholeCommentString = wholeCommentArray[i][0] + ' ' + wholeCommentArray[i][1].join(', ');
				console.log(wholeCommentString);
				wholeCommentStrings.push(wholeCommentString);
			} else {
				const wholeCommentString = wholeCommentArray[i][0] + ' - ' + wholeCommentArray[i][1].join(', ');
				console.log(wholeCommentString);
				wholeCommentStrings.push(wholeCommentString);
			}
		}
		wholeCommentText.innerHTML = wholeCommentStrings.join(', ');
	}
});

function copiarAlPortapapeles(id_elemento) {
	var aux = document.createElement('input');
	aux.setAttribute('value', document.getElementById(id_elemento).innerHTML);
	document.body.appendChild(aux);
	aux.select();
	document.execCommand('copy');
	document.body.removeChild(aux);
}

wholeCommentContainer.addEventListener('click', event => {
	copiarAlPortapapeles('whole-comment-text');
});

for (book of data) {
	const bookContainer = document.createElement('div');
	const bookTitle = document.createElement('h3');

	bookContainer.setAttribute('id', book[0]);
	bookContainer.setAttribute('class', 'book');

	commentsContainer.appendChild(bookContainer);
	bookContainer.appendChild(bookTitle);

	bookTitle.innerText = book[0];

	for (row of book[1]) {
		row = Object.entries(row);
		for (comment of row) {
			const commentButton = document.createElement('p');
			commentButton.setAttribute('class', "comment");

			bookContainer.appendChild(commentButton);

			commentButton.innerText = comment[1];
		}
	}
}
